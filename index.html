<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–ò–°–¢–ï–ú–ù–´–ô –ê–†–•–ò–í</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            overflow: hidden;
            background: #000;
            color: #00ff00;
            width: 100vw;
            height: 100vh;
        }

        #welcomeScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffafbd, #ffc3a0);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .happy-title {
            font-size: 3em;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 30px;
            text-align: center;
        }

        .cute-button {
            background: #fff;
            color: #ff6b6b;
            border: 3px dashed #ff6b6b;
            padding: 20px 40px;
            font-size: 1.5em;
            border-radius: 50px;
            cursor: pointer;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 900;
        }

        #blackScreen { 
            background: #000; 
            color: #00ff00;
            font-size: 2em;
            text-align: center;
        }

        #whiteScreen { background: #fff; }
        #redScreen { background: #ff0000; }

        #horrorMode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 800;
        }

        .horror-timer {
            font-size: 8em;
            color: #00ff00;
            text-shadow: 0 0 20px #00ff00;
            margin-bottom: 30px;
        }

        .horror-input {
            background: #000;
            color: #00ff00;
            border: 2px solid #00ff00;
            padding: 15px;
            font-size: 1.5em;
            width: 300px;
            text-align: center;
        }

        .attempts-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #ff4444;
            font-size: 1.2em;
        }

        #miniGame {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 700;
        }

        #gameCanvas {
            border: 2px solid #00ff00;
            background: #00CED1;
        }

        .wasd-hint {
            color: #00ff00;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ff00;
        }

        .level-info {
            color: #00ff00;
            font-size: 1.2em;
            margin-top: 10px;
        }

        #fioScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 500;
        }

        .fio-input {
            background: #000;
            color: #00ff00;
            border: 1px solid #00aa00;
            padding: 15px;
            font-size: 1.2em;
            width: 400px;
            text-align: center;
            margin: 20px;
        }

        #staticScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            z-index: 400;
        }

        .static-noise {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(255,255,255,0.1) 2px,
                    rgba(255,255,255,0.1) 4px
                ),
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 2px,
                    rgba(255,255,255,0.05) 2px,
                    rgba(255,255,255,0.05) 4px
                );
            animation: staticMove 0.1s infinite;
        }

        @keyframes staticMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(2px, 2px); }
        }

        #finalQRScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 300;
        }

        .qr-code {
            width: 300px;
            height: 300px;
            border: 2px solid #00ff00;
            background: #001100;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #00ff00;
            font-size: 1.2em;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- üéÄ –ú–ò–õ–ê–Ø –ü–†–ò–ú–ê–ù–ö–ê -->
    <div id="welcomeScreen">
        <div class="happy-title">üéÆ –î–∞–≤–∞–π –ø–æ–∏–≥—Ä–∞–µ–º –≤ –≤–µ—Å—ë–ª—É—é –∏–≥—Ä—É! üéÆ</div>
        <button class="cute-button" onclick="startHorror()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É!</button>
    </div>

    <!-- ‚ö° –≠–ö–†–ê–ù–´ –ü–ï–†–ï–•–û–î–ê -->
    <div id="blackScreen" class="fullscreen"></div>
    <div id="whiteScreen" class="fullscreen"></div>
    <div id="redScreen" class="fullscreen"></div>

    <!-- üíÄ –•–û–†–†–û–†-–†–ï–ñ–ò–ú -->
    <div id="horrorMode">
        <div class="attempts-counter">–ü–æ–ø—ã—Ç–∫–∏: <span id="attemptsCount">4</span></div>
        <div class="horror-timer" id="timer">30.0</div>
        <input type="text" class="horror-input" id="codeInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥..." onkeypress="checkCode(event)">
    </div>

    <!-- üéÆ –ú–ò–ù–ò-–ò–ì–†–ê -->
    <div id="miniGame">
        <div class="wasd-hint">–£—Ä–æ–≤–µ–Ω—å: <span id="currentLevel">1</span>/4 - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: WASD</div>
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div class="level-info">–î–æ–π–¥–∏ –¥–æ –∫—Ä–∞—Å–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞, –Ω–µ –∫–∞—Å–∞—è—Å—å —Å—Ç–µ–Ω!</div>
    </div>

    <!-- üìù –§–ò–û –í–í–û–î -->
    <div id="fioScreen">
        <div style="color: #00ff00; font-size: 1.5em; margin-bottom: 30px;">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</div>
        <input type="text" class="fio-input" id="fioInput" placeholder="–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ" onkeypress="checkFIO(event)">
        <div style="color: #00aa00; font-size: 0.9em; margin-top: 10px;">–¢—Ä–∏ —Å–ª–æ–≤–∞ —Å –∑–∞–≥–ª–∞–≤–Ω—ã—Ö –±—É–∫–≤</div>
    </div>

    <!-- üì∫ –≠–ö–†–ê–ù –ü–û–ú–ï–• -->
    <div id="staticScreen">
        <div class="static-noise"></div>
    </div>

    <!-- üéØ –§–ò–ù–ê–õ–¨–ù–´–ô QR -->
    <div id="finalQRScreen">
        <div style="color: #00ff00; font-size: 1.5em; margin-bottom: 30px;">–î–æ—Å—Ç—É–ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω</div>
        <div class="qr-code">
            <img src="https://cdn.qr-code-generator.com/qrcode-preview?background_color=%23ff0000&foreground_color=%23ffffff&marker_left_inner_color=%23ffffff&marker_left_outer_color=%23ffffff&marker_right_inner_color=%23ffffff&marker_right_outer_color=%23ffffff&marker_bottom_inner_color=%23ffffff&marker_bottom_outer_color=%23ffffff&marker_left_template=version17&marker_right_template=version17&marker_bottom_template=version17&qr_code_pattern=&qr_code_logo=no-logo&qr_code_text=https%3A%2F%2Fqrco.de%2FbgM7xd&frame_name=no-frame&frame_color=%23000000&frame_text=Scan%20Me&image_format=PNG&image_width=500&Expires=1759609899&Signature=XIrEMzxIz7pBfifSvf7T5UKP4NZZa3n08XEO~ZwioRHjRb0KWias3rgOmZkhZ7ALaJcBUbxYorU2wpHYj61Om5olmTxQi6p7FZ2y7jmYlvTKsy62CRskM2EUqKy-5kGdMCETaOrO3z4M6xZLbnWWJ6A3GqmA9dVO~wpN0tTMcLU3tXXsVFLzjBMH-dUwI5ZEdWAjeJt2tKoMBTTt31HgJm4uBWqYogM1W8IVIofpiVlxlyYNcPClByVDF73B1pzX1HwElr~5oLXAFBaE6XiZ660AlkPRacPQleC23t9DwUStcUKH1EaaS1AlMwhfZWz6vhO0L3PJC-zOCTXSujPf8Q__&Key-Pair-Id=KKMPOJU8AYATR" width="280" height="280" alt="QR Code">
        </div>
    </div>

    <script>
        const CORRECT_CODE = "J578654";
        const TOTAL_TIME = 30;
        const MAX_ATTEMPTS = 4;

        let timerInterval;
        let timeLeft = TOTAL_TIME;
        let attemptsLeft = MAX_ATTEMPTS;
        let currentLevel = 1;
        let gameActive = false;
        let firstFIOEntered = false;

        function startHorror() {
            document.getElementById('welcomeScreen').style.display = 'none';
            showScreen('blackScreen', 1000, () => {
                document.getElementById('horrorMode').style.display = 'flex';
                startTimer();
            });
        }

        function startTimer() {
            timeLeft = TOTAL_TIME;
            updateTimer();
            
            timerInterval = setInterval(() => {
                timeLeft -= 0.1;
                if (timeLeft <= 0) endGame(false);
                updateTimer();
            }, 100);
        }

        function updateTimer() {
            const timer = document.getElementById('timer');
            timer.textContent = timeLeft.toFixed(1);
            timer.style.color = timeLeft > 10 ? '#00ff00' : timeLeft > 5 ? '#ffff00' : '#ff4444';
        }

        function checkCode(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('codeInput');
                const code = input.value.toUpperCase().trim();
                
                if (code === CORRECT_CODE) {
                    startMiniGame();
                } else {
                    attemptsLeft--;
                    document.getElementById('attemptsCount').textContent = attemptsLeft;
                    input.value = '';
                    if (attemptsLeft <= 0) endGame(false);
                }
            }
        }

        function startMiniGame() {
            clearInterval(timerInterval);
            document.getElementById('horrorMode').style.display = 'none';
            
            showScreen('blackScreen', 1000, () => {
                document.getElementById('miniGame').style.display = 'flex';
                currentLevel = 1;
                document.getElementById('currentLevel').textContent = currentLevel;
                initMazeGame();
            });
        }

        function initMazeGame() {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            
            const TILE_SIZE = 40;
            const DICE_SIZE = 20;
            const DICE_SPEED = 4;
            
            const dice = { x: 0, y: 0, size: DICE_SIZE, color: '#FFFFFF', speed: DICE_SPEED };
            const exit = { x: 0, y: 0, width: 60, height: 40, color: '#FF0000' };

            const levels = [
                [
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
                ],
                [
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
                ],
                [
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
                ],
                [
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
                ]
            ];
            
            const maze = levels[currentLevel - 1];
            const keys = {};
            gameActive = true;

            function findSafePosition() {
                for (let y = 1; y < maze.length - 1; y++) {
                    for (let x = 1; x < maze[0].length - 1; x++) {
                        if (maze[y][x] === 0) {
                            return { x: x * TILE_SIZE + 10, y: y * TILE_SIZE + 10 };
                        }
                    }
                }
                return { x: 60, y: 60 };
            }

            function findExitPosition() {
                for (let y = 1; y < maze.length - 1; y++) {
                    for (let x = maze[0].length - 2; x > 1; x--) {
                        if (maze[y][x] === 0) {
                            return { x: x * TILE_SIZE - 20, y: y * TILE_SIZE - 10 };
                        }
                    }
                }
                return { x: 700, y: 100 };
            }

            const startPos = findSafePosition();
            const exitPos = findExitPosition();
            
            dice.x = startPos.x;
            dice.y = startPos.y;
            exit.x = exitPos.x;
            exit.y = exitPos.y;
            
            function gameLoop() {
                if (!gameActive) return;
                
                ctx.fillStyle = '#00CED1';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                drawMaze();
                
                ctx.fillStyle = exit.color;
                ctx.fillRect(exit.x, exit.y, exit.width, exit.height);
                
                drawDice();
                
                const prevX = dice.x;
                const prevY = dice.y;
                
                if (keys['w'] || keys['ArrowUp']) dice.y -= dice.speed;
                if (keys['s'] || keys['ArrowDown']) dice.y += dice.speed;
                if (keys['a'] || keys['ArrowLeft']) dice.x -= dice.speed;
                if (keys['d'] || keys['ArrowRight']) dice.x += dice.speed;
                
                if (checkWallCollision(dice.x, dice.y, dice.size)) {
                    dice.x = prevX;
                    dice.y = prevY;
                    gameOver();
                    return;
                }
                
                if (dice.x < exit.x + exit.width &&
                    dice.x + dice.size > exit.x &&
                    dice.y < exit.y + exit.height &&
                    dice.y + dice.size > exit.y) {
                    nextLevel();
                    return;
                }
                
                requestAnimationFrame(gameLoop);
            }
            
            function drawMaze() {
                ctx.fillStyle = '#000000';
                for (let y = 0; y < maze.length; y++) {
                    for (let x = 0; x < maze[y].length; x++) {
                        if (maze[y][x] === 1) {
                            ctx.fillRect(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                        }
                    }
                }
            }
            
            function drawDice() {
                ctx.fillStyle = dice.color;
                ctx.fillRect(dice.x, dice.y, dice.size, dice.size);
                ctx.strokeStyle = '#000000';
                ctx.strokeRect(dice.x, dice.y, dice.size, dice.size);
                
                ctx.fillStyle = '#000000';
                const dotSize = 2;
                
                ctx.beginPath();
                ctx.arc(dice.x + dice.size/2, dice.y + dice.size/2, dotSize, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.beginPath();
                ctx.arc(dice.x + dice.size/4, dice.y + dice.size/4, dotSize, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.beginPath();
                ctx.arc(dice.x + 3*dice.size/4, dice.y + 3*dice.size/4, dotSize, 0, Math.PI * 2);
                ctx.fill();
            }
            
            function checkWallCollision(x, y, size) {
                const points = [
                    {x: x, y: y},
                    {x: x + size, y: y},
                    {x: x, y: y + size},
                    {x: x + size, y: y + size}
                ];
                
                for (let point of points) {
                    const mazeX = Math.floor(point.x / TILE_SIZE);
                    const mazeY = Math.floor(point.y / TILE_SIZE);
                    
                    if (mazeY >= 0 && mazeY < maze.length && 
                        mazeX >= 0 && mazeX < maze[0].length &&
                        maze[mazeY][mazeX] === 1) {
                        return true;
                    }
                }
                return false;
            }
            
            function nextLevel() {
                gameActive = false;
                currentLevel++;
                if (currentLevel <= 4) {
                    document.getElementById('currentLevel').textContent = currentLevel;
                    showScreen('blackScreen', 1000, () => {
                        gameActive = true;
                        initMazeGame();
                    });
                } else {
                    showScreen('blackScreen', 1000, () => {
                        startFIOPhase();
                    });
                }
            }
            
            function gameOver() {
                gameActive = false;
                showScreen('blackScreen', 2000, () => {
                    endGame(false);
                });
            }
            
            window.addEventListener('keydown', (e) => {
                if (gameActive) {
                    keys[e.key] = true;
                }
            });
            
            window.addEventListener('keyup', (e) => {
                if (gameActive) {
                    keys[e.key] = false;
                }
            });
            
            gameLoop();
        }

        function startFIOPhase() {
            document.getElementById('miniGame').style.display = 'none';
            document.getElementById('fioScreen').style.display = 'flex';
            firstFIOEntered = false;
        }

        function checkFIO(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('fioInput');
                const fio = input.value.trim();
                
                const words = fio.split(' ').filter(word => word.length > 0);
                const isValid = words.length >= 3 && 
                               words.every(word => /^[–ê-–Ø][–∞-—è]*$/.test(word));
                
                if (isValid) {
                    if (!firstFIOEntered) {
                        firstFIOEntered = true;
                        const blackScreen = document.getElementById('blackScreen');
                        blackScreen.innerHTML = '—ç—Ç–æ –≤–µ–¥—å –Ω–µ —Ç–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ, –≤–µ—Ä–Ω–æ?';
                        blackScreen.style.display = 'flex';
                        
                        setTimeout(() => {
                            blackScreen.style.display = 'none';
                            document.getElementById('fioScreen').style.display = 'flex';
                            document.getElementById('fioInput').value = '';
                        }, 3000);
                    } else {
                        document.getElementById('fioScreen').style.display = 'none';
                        
                        showScreen('redScreen', 200, () => {
                            showScreen('whiteScreen', 3000, () => {
                                document.getElementById('staticScreen').style.display = 'block';
                                setTimeout(() => {
                                    document.getElementById('staticScreen').style.display = 'none';
                                    showFinalQR();
                                }, 7000);
                            });
                        });
                    }
                } else {
                    input.style.borderColor = '#ff4444';
                    setTimeout(() => input.style.borderColor = '#00aa00', 1000);
                }
            }
        }

        function showFinalQR() {
            document.getElementById('finalQRScreen').style.display = 'flex';
        }

        function showScreen(screenId, duration, callback) {
            const screen = document.getElementById(screenId);
            screen.style.display = 'flex';
            
            setTimeout(() => {
                screen.style.display = 'none';
                if (callback) callback();
            }, duration);
        }

        function endGame(isWin) {
            clearInterval(timerInterval);
            document.getElementById('horrorMode').style.display = 'none';
        }
    </script>
</body>
</html>
